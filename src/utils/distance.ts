// Haversine formula to calculate distance between two coordinates
export function calculateDistance(
  lat1: number,
  lon1: number,
  lat2: number,
  lon2: number
): number {
  const R = 3959; // Earth's radius in miles
  const dLat = (lat2 - lat1) * (Math.PI / 180);
  const dLon = (lon2 - lon1) * (Math.PI / 180);
  
  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos(lat1 * (Math.PI / 180)) *
    Math.cos(lat2 * (Math.PI / 180)) *
    Math.sin(dLon / 2) *
    Math.sin(dLon / 2);
  
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  const distance = R * c;
  
  return Math.round(distance * 10) / 10; // Round to 1 decimal place
}

// Mock coordinates for major cities (in real app, this would come from a geocoding service)
export const cityCoordinates: Record<string, { latitude: number; longitude: number }> = {
  'New York': { latitude: 40.7128, longitude: -74.0060 },
  'Los Angeles': { latitude: 34.0522, longitude: -118.2437 },
  'Chicago': { latitude: 41.8781, longitude: -87.6298 },
  'Houston': { latitude: 29.7604, longitude: -95.3698 },
  'Phoenix': { latitude: 33.4484, longitude: -112.0740 },
  'Philadelphia': { latitude: 39.9526, longitude: -75.1652 },
  'San Antonio': { latitude: 29.4241, longitude: -98.4936 },
  'San Diego': { latitude: 32.7157, longitude: -117.1611 },
  'Dallas': { latitude: 32.7767, longitude: -96.7970 },
  'San Jose': { latitude: 37.3382, longitude: -121.8863 },
  'Austin': { latitude: 30.2672, longitude: -97.7431 },
  'Jacksonville': { latitude: 30.3322, longitude: -81.6557 },
  'San Francisco': { latitude: 37.7749, longitude: -122.4194 },
  'Columbus': { latitude: 39.9612, longitude: -82.9988 },
  'Fort Worth': { latitude: 32.7555, longitude: -97.3308 },
  'Charlotte': { latitude: 35.2271, longitude: -80.8431 },
  'Seattle': { latitude: 47.6062, longitude: -122.3321 },
  'Denver': { latitude: 39.7392, longitude: -104.9903 },
  'Washington': { latitude: 38.9072, longitude: -77.0369 },
  'Boston': { latitude: 42.3601, longitude: -71.0589 },
  'El Paso': { latitude: 31.7619, longitude: -106.4850 },
  'Detroit': { latitude: 42.3314, longitude: -83.0458 },
  'Nashville': { latitude: 36.1627, longitude: -86.7816 },
  'Portland': { latitude: 45.5152, longitude: -122.6784 },
  'Oklahoma City': { latitude: 35.4676, longitude: -97.5164 },
  'Las Vegas': { latitude: 36.1699, longitude: -115.1398 },
  'Louisville': { latitude: 38.2527, longitude: -85.7585 },
  'Baltimore': { latitude: 39.2904, longitude: -76.6122 },
  'Milwaukee': { latitude: 43.0389, longitude: -87.9065 },
  'Albuquerque': { latitude: 35.0844, longitude: -106.6504 },
  'Tucson': { latitude: 32.2226, longitude: -110.9747 },
  'Fresno': { latitude: 36.7378, longitude: -119.7871 },
  'Sacramento': { latitude: 38.5816, longitude: -121.4944 },
  'Mesa': { latitude: 33.4152, longitude: -111.8315 },
  'Kansas City': { latitude: 39.0997, longitude: -94.5786 },
  'Atlanta': { latitude: 33.7490, longitude: -84.3880 },
  'Long Beach': { latitude: 33.7701, longitude: -118.1937 },
  'Colorado Springs': { latitude: 38.8339, longitude: -104.8214 },
  'Raleigh': { latitude: 35.7796, longitude: -78.6382 },
  'Miami': { latitude: 25.7617, longitude: -80.1918 },
  'Virginia Beach': { latitude: 36.8529, longitude: -75.9780 },
  'Omaha': { latitude: 41.2565, longitude: -95.9345 },
  'Oakland': { latitude: 37.8044, longitude: -122.2711 },
  'Minneapolis': { latitude: 44.9778, longitude: -93.2650 },
  'Tulsa': { latitude: 36.1540, longitude: -95.9928 },
  'Arlington': { latitude: 32.7357, longitude: -97.1081 },
  'Wichita': { latitude: 37.6872, longitude: -97.3301 },
  'Tampa': { latitude: 27.9506, longitude: -82.4572 },
  'New Orleans': { latitude: 29.9511, longitude: -90.0715 },
  'Cleveland': { latitude: 41.4993, longitude: -81.6944 },
  'Honolulu': { latitude: 21.3099, longitude: -157.8581 },
  'Anaheim': { latitude: 33.8366, longitude: -117.9143 },
  'Lexington': { latitude: 38.0406, longitude: -84.5037 },
  'Stockton': { latitude: 37.9577, longitude: -121.2908 },
  'Corpus Christi': { latitude: 27.8006, longitude: -97.3964 },
  'Henderson': { latitude: 36.0395, longitude: -114.9817 },
  'Riverside': { latitude: 33.9533, longitude: -117.3962 },
  'Newark': { latitude: 40.7357, longitude: -74.1724 },
  'Saint Paul': { latitude: 44.9537, longitude: -93.0900 },
  'Santa Ana': { latitude: 33.7455, longitude: -117.8677 },
  'Cincinnati': { latitude: 39.1031, longitude: -84.5120 },
  'Irvine': { latitude: 33.6846, longitude: -117.8265 },
  'Orlando': { latitude: 28.5383, longitude: -81.3792 },
  'Pittsburgh': { latitude: 40.4406, longitude: -79.9959 },
  'St. Louis': { latitude: 38.6270, longitude: -90.1994 },
  'Greensboro': { latitude: 36.0726, longitude: -79.7920 },
  'Jersey City': { latitude: 40.7178, longitude: -74.0431 },
  'Anchorage': { latitude: 61.2181, longitude: -149.9003 },
  'Lincoln': { latitude: 40.8136, longitude: -96.7026 },
  'Plano': { latitude: 33.0198, longitude: -96.6989 },
  'Durham': { latitude: 35.9940, longitude: -78.8986 },
  'Buffalo': { latitude: 42.8864, longitude: -78.8784 },
  'Chandler': { latitude: 33.3062, longitude: -111.8413 },
  'Chula Vista': { latitude: 32.6401, longitude: -117.0842 },
  'Toledo': { latitude: 41.6528, longitude: -83.5379 },
  'Madison': { latitude: 43.0731, longitude: -89.4012 },
  'Reno': { latitude: 39.5296, longitude: -119.8138 },
  'Fort Wayne': { latitude: 41.0793, longitude: -85.1394 },
  'Laredo': { latitude: 27.5306, longitude: -99.4803 },
  'Lubbock': { latitude: 33.5779, longitude: -101.8552 },
  'St. Petersburg': { latitude: 27.7676, longitude: -82.6404 },
  'Irving': { latitude: 32.8140, longitude: -96.9489 },
  'Chesapeake': { latitude: 36.7682, longitude: -76.2875 },
  'Gilbert': { latitude: 33.3528, longitude: -111.7890 },
  'Garland': { latitude: 32.9126, longitude: -96.6389 },
  'Hialeah': { latitude: 25.8576, longitude: -80.2781 },
  'Scottsdale': { latitude: 33.4942, longitude: -111.9261 },
  'Baton Rouge': { latitude: 30.4515, longitude: -91.1871 },
  'Fremont': { latitude: 37.5485, longitude: -121.9886 },
  'Richmond': { latitude: 37.5407, longitude: -77.4360 },
  'Boise': { latitude: 43.6150, longitude: -116.2023 },
  'San Bernardino': { latitude: 34.1083, longitude: -117.2898 },
  'Birmingham': { latitude: 33.5186, longitude: -86.8104 },
  'Spokane': { latitude: 47.6587, longitude: -117.4260 },
  'Rochester': { latitude: 43.1566, longitude: -77.6088 },
  'Des Moines': { latitude: 41.5868, longitude: -93.6250 },
  'Modesto': { latitude: 37.6391, longitude: -120.9969 },
  'Fayetteville': { latitude: 35.0527, longitude: -78.8784 },
  'Tacoma': { latitude: 47.2529, longitude: -122.4443 },
  'Oxnard': { latitude: 34.1975, longitude: -119.1771 },
  'Fontana': { latitude: 34.0922, longitude: -117.4350 },
  'Columbus, GA': { latitude: 32.4609, longitude: -84.9877 },
  'Montgomery': { latitude: 32.3668, longitude: -86.3000 },
  'Moreno Valley': { latitude: 33.9425, longitude: -117.2297 },
  'Shreveport': { latitude: 32.5252, longitude: -93.7502 },
  'Aurora': { latitude: 39.7294, longitude: -104.8319 },
  'Yonkers': { latitude: 40.9312, longitude: -73.8988 },
  'Akron': { latitude: 41.0814, longitude: -81.5190 },
  'Huntington Beach': { latitude: 33.6603, longitude: -117.9992 },
  'Little Rock': { latitude: 34.7465, longitude: -92.2896 },
  'Augusta': { latitude: 33.4735, longitude: -82.0105 },
  'Amarillo': { latitude: 35.2220, longitude: -101.8313 },
  'Glendale': { latitude: 33.5387, longitude: -112.1860 },
  'Mobile': { latitude: 30.6954, longitude: -88.0399 },
  'Grand Rapids': { latitude: 42.9634, longitude: -85.6681 },
  'Salt Lake City': { latitude: 40.7608, longitude: -111.8910 },
  'Tallahassee': { latitude: 30.4383, longitude: -84.2807 },
  'Huntsville': { latitude: 34.7304, longitude: -86.5861 },
  'Grand Prairie': { latitude: 32.7460, longitude: -96.9978 },
  'Knoxville': { latitude: 35.9606, longitude: -83.9207 },
  'Worcester': { latitude: 42.2626, longitude: -71.8023 },
  'Newport News': { latitude: 37.0871, longitude: -76.4730 },
  'Brownsville': { latitude: 25.9018, longitude: -97.4975 },
  'Overland Park': { latitude: 38.9822, longitude: -94.6708 },
  'Santa Clarita': { latitude: 34.3917, longitude: -118.5426 },
  'Providence': { latitude: 41.8240, longitude: -71.4128 },
  'Garden Grove': { latitude: 33.7739, longitude: -117.9415 },
  'Chattanooga': { latitude: 35.0456, longitude: -85.3097 },
  'Oceanside': { latitude: 33.1959, longitude: -117.3795 },
  'Jackson': { latitude: 32.2988, longitude: -90.1848 },
  'Fort Lauderdale': { latitude: 26.1224, longitude: -80.1373 },
  'Santa Rosa': { latitude: 38.4404, longitude: -122.7144 },
  'Rancho Cucamonga': { latitude: 34.1064, longitude: -117.5931 },
  'Port St. Lucie': { latitude: 27.2939, longitude: -80.3501 },
  'Tempe': { latitude: 33.4255, longitude: -111.9400 },
  'Ontario': { latitude: 34.0633, longitude: -117.6509 },
  'Vancouver': { latitude: 45.6387, longitude: -122.6615 },
  'Cape Coral': { latitude: 26.5629, longitude: -81.9495 },
  'Sioux Falls': { latitude: 43.5446, longitude: -96.7311 },
  'Springfield': { latitude: 37.2153, longitude: -93.2982 },
  'Peoria': { latitude: 40.6936, longitude: -89.5890 },
  'Pembroke Pines': { latitude: 26.0079, longitude: -80.2962 },
  'Elk Grove': { latitude: 38.4088, longitude: -121.3716 },
  'Corona': { latitude: 33.8753, longitude: -117.5664 },
  'Lancaster': { latitude: 34.6868, longitude: -118.1542 },
  'Eugene': { latitude: 44.0521, longitude: -123.0868 },
  'Palmdale': { latitude: 34.5794, longitude: -118.1165 },
  'Salinas': { latitude: 36.6777, longitude: -121.6555 },
  'Springfield, IL': { latitude: 39.7817, longitude: -89.6501 },
  'Pasadena': { latitude: 34.1478, longitude: -118.1445 },
  'Fort Collins': { latitude: 40.5853, longitude: -105.0844 },
  'Hayward': { latitude: 37.6688, longitude: -122.0808 },
  'Pomona': { latitude: 34.0555, longitude: -117.7500 },
  'Cary': { latitude: 35.7915, longitude: -78.7811 },
  'Rockford': { latitude: 42.2711, longitude: -89.0940 },
  'Alexandria': { latitude: 38.8048, longitude: -77.0469 },
  'Escondido': { latitude: 33.1192, longitude: -117.0864 },
  'McKinney': { latitude: 33.1972, longitude: -96.6397 },
  'Kansas City, KS': { latitude: 39.1142, longitude: -94.6275 },
  'Joliet': { latitude: 41.5250, longitude: -88.0817 },
  'Sunnyvale': { latitude: 37.3688, longitude: -122.0363 },
  'Torrance': { latitude: 33.8358, longitude: -118.3406 },
  'Bridgeport': { latitude: 41.1865, longitude: -73.1952 },
  'Lakewood': { latitude: 39.7047, longitude: -105.0814 },
  'Hollywood': { latitude: 26.0112, longitude: -80.1495 },
  'Paterson': { latitude: 40.9168, longitude: -74.1718 },
  'Naperville': { latitude: 41.7508, longitude: -88.1535 },
  'Syracuse': { latitude: 43.0481, longitude: -76.1474 },
  'Mesquite': { latitude: 32.7668, longitude: -96.5992 },
  'Dayton': { latitude: 39.7589, longitude: -84.1916 },
  'Savannah': { latitude: 32.0835, longitude: -81.0998 },
  'Clarksville': { latitude: 36.5298, longitude: -87.3595 },
  'Orange': { latitude: 33.7879, longitude: -117.8531 },
  'Pasadena, TX': { latitude: 29.6911, longitude: -95.2091 },
  'Fullerton': { latitude: 33.8703, longitude: -117.9242 },
  'Killeen': { latitude: 31.1171, longitude: -97.7278 },
  'Frisco': { latitude: 33.1507, longitude: -96.8236 },
  'Hampton': { latitude: 37.0299, longitude: -76.3452 },
  'McAllen': { latitude: 26.2034, longitude: -98.2300 },
  'Warren': { latitude: 42.5144, longitude: -83.0365 },
  'Bellevue': { latitude: 47.6101, longitude: -122.2015 },
  'West Valley City': { latitude: 40.6916, longitude: -112.0011 },
  'Columbia, SC': { latitude: 34.0007, longitude: -81.0348 },
  'Olathe': { latitude: 38.8814, longitude: -94.8191 },
  'Sterling Heights': { latitude: 42.5803, longitude: -83.0302 },
  'New Haven': { latitude: 41.3083, longitude: -72.9279 },
  'Miramar': { latitude: 25.9873, longitude: -80.2322 },
  'Waco': { latitude: 31.5494, longitude: -97.1467 },
  'Thousand Oaks': { latitude: 34.1706, longitude: -118.8376 },
  'Cedar Rapids': { latitude: 41.9778, longitude: -91.6656 },
  'Charleston': { latitude: 32.7765, longitude: -79.9311 },
  'Visalia': { latitude: 36.3302, longitude: -119.2921 },
  'Topeka': { latitude: 39.0473, longitude: -95.6890 },
  'Elizabeth': { latitude: 40.6640, longitude: -74.2107 },
  'Gainesville': { latitude: 29.6516, longitude: -82.3248 },
  'Thornton': { latitude: 39.8681, longitude: -104.9719 },
  'Roseville': { latitude: 38.7521, longitude: -121.2880 },
  'Carrollton': { latitude: 32.9537, longitude: -96.8903 },
  'Coral Springs': { latitude: 26.2710, longitude: -80.2706 },
  'Stamford': { latitude: 41.0534, longitude: -73.5387 },
  'Simi Valley': { latitude: 34.2694, longitude: -118.7815 },
  'Concord': { latitude: 37.9780, longitude: -122.0311 },
  'Hartford': { latitude: 41.7658, longitude: -72.6734 },
  'Kent': { latitude: 47.3809, longitude: -122.2348 },
  'Lafayette': { latitude: 30.2241, longitude: -92.0198 },
  'Midland': { latitude: 31.9974, longitude: -102.0779 },
  'Surprise': { latitude: 33.6292, longitude: -112.3679 },
  'Denton': { latitude: 33.2148, longitude: -97.1331 },
  'Victorville': { latitude: 34.5362, longitude: -117.2911 },
  'Evansville': { latitude: 37.9716, longitude: -87.5710 },
  'Santa Clara': { latitude: 37.3541, longitude: -121.9552 },
  'Abilene': { latitude: 32.4487, longitude: -99.7331 },
  'Athens': { latitude: 33.9519, longitude: -83.3576 },
  'Vallejo': { latitude: 38.1041, longitude: -122.2566 },
  'Allentown': { latitude: 40.6023, longitude: -75.4714 },
  'Norman': { latitude: 35.2226, longitude: -97.4395 },
  'Beaumont': { latitude: 30.0803, longitude: -94.1266 },
  'Independence': { latitude: 39.0911, longitude: -94.4155 },
  'Murfreesboro': { latitude: 35.8456, longitude: -86.3903 },
  'Ann Arbor': { latitude: 42.2808, longitude: -83.7430 },
  'Springfield, MA': { latitude: 42.1015, longitude: -72.5898 },
  'Berkeley': { latitude: 37.8715, longitude: -122.2730 },
  'Peoria, AZ': { latitude: 33.5806, longitude: -112.2374 },
  'Provo': { latitude: 40.2338, longitude: -111.6585 },
  'El Monte': { latitude: 34.0686, longitude: -118.0276 },
  'Columbia, MO': { latitude: 38.9517, longitude: -92.3341 },
  'Lansing': { latitude: 42.3314, longitude: -84.5467 },
  'Fargo': { latitude: 46.8772, longitude: -96.7898 },
  'Downey': { latitude: 33.9401, longitude: -118.1326 },
  'Costa Mesa': { latitude: 33.6411, longitude: -117.9187 },
  'Wilmington': { latitude: 39.7391, longitude: -75.5398 },
  'Arvada': { latitude: 39.8028, longitude: -105.0875 },
  'Inglewood': { latitude: 33.9617, longitude: -118.3531 },
  'Miami Gardens': { latitude: 25.9420, longitude: -80.2456 },
  'Carlsbad': { latitude: 33.1581, longitude: -117.3506 },
  'Westminster': { latitude: 39.8367, longitude: -105.0372 },
  'Rochester, MN': { latitude: 44.0121, longitude: -92.4802 },
  'Odessa': { latitude: 31.8457, longitude: -102.3676 },
  'Manchester': { latitude: 42.9956, longitude: -71.4548 },
  'Elgin': { latitude: 42.0354, longitude: -88.2826 },
  'West Jordan': { latitude: 40.6097, longitude: -111.9391 },
  'Round Rock': { latitude: 30.5083, longitude: -97.6789 },
  'Clearwater': { latitude: 27.9659, longitude: -82.8001 },
  'Waterbury': { latitude: 41.5581, longitude: -73.0515 },
  'Gresham': { latitude: 45.5001, longitude: -122.4302 },
  'Fairfield': { latitude: 38.2494, longitude: -122.0400 },
  'Billings': { latitude: 45.7833, longitude: -108.5007 },
  'Lowell': { latitude: 42.6334, longitude: -71.3162 },
  'San Buenaventura': { latitude: 34.2746, longitude: -119.2290 },
  'Pueblo': { latitude: 38.2544, longitude: -104.6091 },
  'High Point': { latitude: 35.9557, longitude: -80.0053 },
  'West Covina': { latitude: 34.0686, longitude: -117.9390 },
  'Richmond, CA': { latitude: 37.9358, longitude: -122.3478 },
  'Murrieta': { latitude: 33.5539, longitude: -117.2139 },
  'Cambridge': { latitude: 42.3736, longitude: -71.1097 },
  'Antioch': { latitude: 38.0049, longitude: -121.8058 },
  'Temecula': { latitude: 33.4936, longitude: -117.1484 },
  'Norwalk, CA': { latitude: 33.9022, longitude: -118.0817 },
  'Centennial': { latitude: 39.5807, longitude: -104.8760 },
  'Everett': { latitude: 47.9790, longitude: -122.2021 },
  'Palm Bay': { latitude: 28.0345, longitude: -80.5887 },
  'Wichita Falls': { latitude: 33.9137, longitude: -98.4934 },
  'Green Bay': { latitude: 44.5133, longitude: -88.0133 },
  'Daly City': { latitude: 37.7058, longitude: -122.4622 },
  'Burbank': { latitude: 34.1808, longitude: -118.3090 },
  'Richardson': { latitude: 32.9483, longitude: -96.7299 },
  'Pompano Beach': { latitude: 26.2379, longitude: -80.1248 },
  'North Charleston': { latitude: 32.8546, longitude: -79.9748 },
  'Broken Arrow': { latitude: 36.0526, longitude: -95.7969 },
  'Boulder': { latitude: 40.0150, longitude: -105.2705 },
  'West Palm Beach': { latitude: 26.7153, longitude: -80.0534 },
  'San Mateo': { latitude: 37.5630, longitude: -122.3255 },
  'Lewisville': { latitude: 33.0460, longitude: -96.9942 },
  'Fishers': { latitude: 39.9568, longitude: -85.9686 },
  'Rialto': { latitude: 34.1064, longitude: -117.3703 },
  'Edison': { latitude: 40.5187, longitude: -74.4121 },
  'Woodbridge': { latitude: 40.5576, longitude: -74.2846 },
  'San Angelo': { latitude: 31.4638, longitude: -100.4370 },
  'Sandy Springs': { latitude: 33.9304, longitude: -84.3733 },
  'Bend': { latitude: 44.0582, longitude: -121.3153 },
  'Medford': { latitude: 42.3265, longitude: -122.8756 },
  'Goodyear': { latitude: 33.4355, longitude: -112.3576 },
  'West Haven': { latitude: 41.2706, longitude: -72.9470 },
  'Norwalk, CT': { latitude: 41.1176, longitude: -73.4079 },
  'Dearborn': { latitude: 42.3223, longitude: -83.1763 },
  'Lawton': { latitude: 34.6087, longitude: -98.3959 },
  'League City': { latitude: 29.5075, longitude: -95.0949 },
  'Tyler': { latitude: 32.3513, longitude: -95.3011 },
  'Pearland': { latitude: 29.5638, longitude: -95.2861 }
};

export function getAdvocateDistance(
  advocateCity: string,
  userCoordinates: { latitude: number; longitude: number }
): number | null {
  const cityCoords = cityCoordinates[advocateCity];
  if (!cityCoords) return null;
  
  return calculateDistance(
    userCoordinates.latitude,
    userCoordinates.longitude,
    cityCoords.latitude,
    cityCoords.longitude
  );
}